---
tags:
  - Cmake
---

# CMake build tools

## Visual Studio Debugging Properties
Variable to populate the `Local Windows Debugger` properties in visual studio. Properties -> Debugging.
Can be used to generate which executables to launch and attach to etc.

`VS_DEBUGGER_ENVIRONMENT `

## Launch app with administrator privileges:

This can be used for flutter apps to make them launch with administrator privileges. This probably works with other cmake programs as well.

[Source](https://stackoverflow.com/questions/71090014/how-to-launch-other-appgo-service-when-flutter-windows-app-start/71123035#71123035)

```
SET_TARGET_PROPERTIES(${BINARY_NAME} PROPERTIES LINK_FLAGS    "/MANIFESTUAC:\"level='requireAdministrator' uiAccess='false'\" /SUBSYSTEM:WINDOWS")
```

## Package system dependecies
Packages OS/System dll's with the output binaries of the target.
```
install(RUNTIME_DEPENDENCY_SET)
```

## Post build step, copy output files to other directory 
List of generator expressions: [Source](https://cmake.org/cmake/help/git-stage/manual/cmake-generator-expressions.7.html#genex:TARGET_RUNTIME_DLL_DIRS)

$<TARGET_RUNTIME_DLLS:target_name>

```
find_package(foo CONFIG REQUIRED) # package generated by install(EXPORT)

add_executable(exe main.c)
target_link_libraries(exe PRIVATE foo::foo foo::bar)
add_custom_command(TARGET exe POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy -t $<TARGET_FILE_DIR:exe> $<TARGET_RUNTIME_DLLS:exe>
  COMMAND_EXPAND_LISTS
)
```

